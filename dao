package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Attendance;
import java.sql.Date;
import java.util.List;

public interface AttendanceDao {

    Attendance save(Attendance attendance);

    Attendance findByUserIdAndDate(Long userId, Date date);

    List<Attendance> findByUserId(Long userId);

    List<Attendance> findByBatchCode(Long batchCode);

    void update(Attendance attendance);

    void delete(Long attendanceId);
    
    
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Attendance;
import com.finalproject.internMgmtSystem.repository.AttendanceDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.sql.Date;
import java.util.List;

@Repository
public class AttendanceDaoImpl implements AttendanceDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Attendance> mapper = (rs, rowNum) -> {
        Attendance a = new Attendance();
        a.setAttendanceId(rs.getLong("attendance_id"));
        a.setUserId(rs.getLong("user_id"));
        a.setBatchCode(rs.getLong("batch_code"));
        a.setDate(rs.getDate("date"));
        a.setPresent(rs.getBoolean("present"));
        return a;
    };

    @Override
    public Attendance save(Attendance attendance) {
        String sql = """
            INSERT INTO attendance (user_id, batch_code, date, present)
            VALUES (?, ?, ?, ?)
        """;

        jdbcTemplate.update(sql,
                attendance.getUserId(),
                attendance.getBatchCode(),
                attendance.getDate(),
                attendance.getPresent()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        attendance.setAttendanceId(id);
        return attendance;
    }

    @Override
    public Attendance findByUserIdAndDate(Long userId, Date date) {
        List<Attendance> list = jdbcTemplate.query(
                "SELECT * FROM attendance WHERE user_id = ? AND date = ?",
                mapper,
                userId,
                date
        );
        return list.isEmpty() ? null : list.get(0);
    }

    @Override
    public List<Attendance> findByUserId(Long userId) {
        return jdbcTemplate.query(
                "SELECT * FROM attendance WHERE user_id = ? ORDER BY date DESC",
                mapper,
                userId
        );
    }

    @Override
    public List<Attendance> findByBatchCode(Long batchCode) {
        return jdbcTemplate.query(
                "SELECT * FROM attendance WHERE batch_code = ? ORDER BY date DESC",
                mapper,
                batchCode
        );
    }

    @Override
    public void update(Attendance attendance) {
        String sql = """
            UPDATE attendance SET present = ? WHERE attendance_id = ?
        """;
        jdbcTemplate.update(sql, attendance.getPresent(), attendance.getAttendanceId());
    }

    @Override
    public void delete(Long attendanceId) {
        jdbcTemplate.update("DELETE FROM attendance WHERE attendance_id = ?", attendanceId);
    }
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.InternshipBatch;
import java.util.List;

public interface BatchDao {

    InternshipBatch save(InternshipBatch batch);

    InternshipBatch findById(Long batchCode);

    List<InternshipBatch> findAll();

    List<InternshipBatch> findByTrainerId(Long trainerId);

    void update(InternshipBatch batch);

    void delete(Long batchCode);

    InternshipBatch findByName(String batchName);
    
    InternshipBatch findByBatchCode(Long batchCode);

    void decrementAvailableSeats(Long batchCode);
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.InternshipBatch;
import com.finalproject.internMgmtSystem.repository.BatchDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public class BatchDaoImpl implements BatchDao {

	@Autowired
	private JdbcTemplate jdbcTemplate;

	private RowMapper<InternshipBatch> mapper = (rs, rowNum) -> {
		InternshipBatch b = new InternshipBatch();
		b.setBatchCode(rs.getLong("batch_code"));
		b.setBatchName(rs.getString("batch_name"));
		b.setCourseName(rs.getString("course_name"));
		b.setTrainerId(rs.getLong("trainer_id"));
		b.setStartDate(rs.getDate("start_date"));
		b.setEndDate(rs.getDate("end_date"));
		b.setTotalSeats(rs.getInt("total_seats"));
		b.setAvailableSeats(rs.getInt("available_seats"));
		return b;
	};

	@Override
	public InternshipBatch save(InternshipBatch batch) {
		String sql = """
				    INSERT INTO internship_batches
				    (batch_name, course_name, trainer_id, start_date, end_date, total_seats, available_seats)
				    VALUES (?, ?, ?, ?, ?, ?, ?)
				""";

		jdbcTemplate.update(sql, batch.getBatchName(), batch.getCourseName(), batch.getTrainerId(),
				batch.getStartDate(), batch.getEndDate(), batch.getTotalSeats(), batch.getAvailableSeats());

		Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
		batch.setBatchCode(id);
		return batch;
	}

	@Override
	public InternshipBatch findById(Long batchCode) {
		List<InternshipBatch> list = jdbcTemplate.query("SELECT * FROM internship_batches WHERE batch_code = ?", mapper,
				batchCode);
		return list.isEmpty() ? null : list.get(0);
	}

	@Override
	public List<InternshipBatch> findAll() {
		return jdbcTemplate.query("SELECT * FROM internship_batches", mapper);
	}

	@Override
	public List<InternshipBatch> findByTrainerId(Long trainerId) {
		return jdbcTemplate.query("SELECT * FROM internship_batches WHERE trainer_id = ?", mapper, trainerId);
	}

	@Override
	public void update(InternshipBatch batch) {
		String sql = """
				    UPDATE internship_batches SET batch_name=?, course_name=?, trainer_id=?, start_date=?,
				    end_date=?, total_seats=?, available_seats=? WHERE batch_code=?
				""";

		jdbcTemplate.update(sql, batch.getBatchName(), batch.getCourseName(), batch.getTrainerId(),

				batch.getStartDate(), batch.getEndDate(), batch.getTotalSeats(), batch.getAvailableSeats(),
				batch.getBatchCode());
	}

	@Override
	public void delete(Long batchCode) {
		jdbcTemplate.update("DELETE FROM internship_batches WHERE batch_code = ?", batchCode);
	}

	@Override
	public InternshipBatch findByName(String batchName) {
		List<InternshipBatch> list = jdbcTemplate.query("SELECT * FROM internship_batches WHERE batch_name = ?", mapper,
				batchName);
		return list.isEmpty() ? null : list.get(0);
	}
	
	@Override
	public InternshipBatch findByBatchCode(Long batchCode) {
	    List<InternshipBatch> list = jdbcTemplate.query(
	        "SELECT * FROM internship_batches WHERE batch_code = ?", mapper, batchCode);
	    return list.isEmpty() ? null : list.get(0);
	}

	@Override
	public void decrementAvailableSeats(Long batchCode) {
	    String sql = """
	        UPDATE internship_batches 
	        SET available_seats = available_seats - 1 
	        WHERE batch_code = ? AND available_seats > 0
	    """;
	    jdbcTemplate.update(sql, batchCode);
	}

}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Feedback;
import java.util.List;

public interface FeedbackDao {

    Feedback save(Feedback feedback);

    List<Feedback> findByTrainerName(String trainerName);

    List<Feedback> findByUserId(Long userId);

    List<Feedback> findAll();
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Feedback;
import com.finalproject.internMgmtSystem.repository.FeedbackDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public class FeedbackDaoImpl implements FeedbackDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Feedback> mapper = (rs, rowNum) -> {
        Feedback f = new Feedback();
        f.setId(rs.getLong("id"));
        f.setUserId(rs.getLong("user_id"));
        f.setUserName(rs.getString("user_name"));
        f.setBatchCode(rs.getLong("batch_code"));
        f.setTrainerName(rs.getString("trainer_name"));
        f.setDate(rs.getTimestamp("date"));
        f.setFeedback(rs.getString("feedback"));
        f.setRating(rs.getInt("rating"));
        return f;
    };

    @Override
    public Feedback save(Feedback feedback) {
        String sql = """
            INSERT INTO feedback (user_id, user_name, batch_code, trainer_name, feedback, rating)
            VALUES (?, ?, ?, ?, ?, ?)
        """;

        jdbcTemplate.update(sql,
                feedback.getUserId(),
                feedback.getUserName(),
                feedback.getBatchCode(),
                feedback.getTrainerName(),
                feedback.getFeedback(),
                feedback.getRating()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        feedback.setId(id);
        return feedback;
    }

    @Override
    public List<Feedback> findByTrainerName(String trainerName) {
        return jdbcTemplate.query(
                "SELECT * FROM feedback WHERE trainer_name = ? ORDER BY date DESC",
                mapper,
                trainerName
        );
    }

    @Override
    public List<Feedback> findByUserId(Long userId) {
        return jdbcTemplate.query(
                "SELECT * FROM feedback WHERE user_id = ? ORDER BY date DESC",
                mapper,
                userId
        );
    }

    @Override
    public List<Feedback> findAll() {
        return jdbcTemplate.query("SELECT * FROM feedback ORDER BY date DESC", mapper);
    }
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Performance;
import java.util.List;

public interface PerformanceDao {

    Performance save(Performance performance);

    List<Performance> findByUserId(Long userId);

    List<Performance> findByTrainerId(Long trainerId);

    void deleteById(Long id);
    
    
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Performance;
import com.finalproject.internMgmtSystem.repository.PerformanceDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public class PerformanceDaoImpl implements PerformanceDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Performance> mapper = (rs, rowNum) -> {
        Performance p = new Performance();
        p.setId(rs.getLong("id"));
        p.setUserId(rs.getLong("user_id"));
        p.setTrainerId(rs.getLong("trainer_id"));
        p.setRemarks(rs.getString("remarks"));
        p.setTaskEvaluationScore(rs.getInt("task_evaluation_score"));
        p.setCreatedAt(rs.getTimestamp("created_at"));
        return p;
    };

    @Override
    public Performance save(Performance performance) {
        String sql = """
            INSERT INTO performance (user_id, trainer_id, remarks, task_evaluation_score)
            VALUES (?, ?, ?, ?)
        """;

        jdbcTemplate.update(sql,
                performance.getUserId(),
                performance.getTrainerId(),
                performance.getRemarks(),
                performance.getTaskEvaluationScore()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        performance.setId(id);
        return performance;
    }

    @Override
    public List<Performance> findByUserId(Long userId) {
        return jdbcTemplate.query(
                "SELECT * FROM performance WHERE user_id = ? ORDER BY created_at DESC",
                mapper,
                userId
        );
    }

    @Override
    public List<Performance> findByTrainerId(Long trainerId) {
        return jdbcTemplate.query(
                "SELECT * FROM performance WHERE trainer_id = ? ORDER BY created_at DESC",
                mapper,
                trainerId
        );
    }

    @Override
    public void deleteById(Long id) {
        jdbcTemplate.update("DELETE FROM performance WHERE id = ?", id);
    }
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Stipend;
import java.util.List;

public interface StipendDao {

    Stipend save(Stipend stipend);

    List<Stipend> findByUserId(Long userId);

    List<Stipend> findAll();
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Stipend;
import com.finalproject.internMgmtSystem.repository.StipendDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.sql.Timestamp;
import java.util.List;

@Repository
public class StipendDaoImpl implements StipendDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Stipend> mapper = (rs, rowNum) -> {
        Stipend s = new Stipend();
        s.setId(rs.getLong("id"));
        s.setUserId(rs.getLong("user_id"));
        s.setUserName(rs.getString("user_name"));
        s.setPaymentDate(rs.getTimestamp("payment_date"));
        s.setPaymentMode(rs.getString("payment_mode"));
        s.setAmount(rs.getDouble("amount"));
        return s;
    };

    @Override
    public Stipend save(Stipend stipend) {
        String sql = """
            INSERT INTO stipend (user_id, user_name, payment_mode, amount,payment_date)
            VALUES (?, ?, ?, ?,NOW())
        """;

        jdbcTemplate.update(sql,
                stipend.getUserId(),
                stipend.getUserName(),
                stipend.getPaymentMode(),
                stipend.getAmount()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        stipend.setId(id);
        stipend.setPaymentDate(new Timestamp(System.currentTimeMillis()));
        return stipend;
    }

    @Override
    public List<Stipend> findByUserId(Long userId) {
        return jdbcTemplate.query(
                "SELECT * FROM stipend WHERE user_id = ? ORDER BY payment_date DESC",
                mapper,
                userId
        );
    }

    @Override
    public List<Stipend> findAll() {
        return jdbcTemplate.query("SELECT * FROM stipend ORDER BY payment_date DESC", mapper);
    }
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Task;
import java.util.List;

public interface TaskDao {

    Task save(Task task);

    Task findById(Long id);

    List<Task> findByUserId(Long userId);

    List<Task> findByTrainerId(Long trainerId);

    void update(Task task);

    void delete(Long id);
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Task;
import com.finalproject.internMgmtSystem.repository.TaskDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public class TaskDaoImpl implements TaskDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Task> mapper = (rs, rowNum) -> {
        Task t = new Task();
        t.setId(rs.getLong("id"));
        t.setUserId(rs.getLong("user_id"));
        t.setDescription(rs.getString("description"));
        t.setTrainerId(rs.getLong("trainer_id"));
        t.setStatus(rs.getString("status"));
        t.setDeadline(rs.getDate("deadline"));
        t.setUploadFile(rs.getString("upload_file"));
        t.setCreatedAt(rs.getTimestamp("created_at"));
        return t;
    };

    @Override
    public Task save(Task task) {
        String sql = """
            INSERT INTO tasks (user_id, description, trainer_id, status, deadline, upload_file)
            VALUES (?, ?, ?, ?, ?, ?)
        """;

        jdbcTemplate.update(sql,
                task.getUserId(),
                task.getDescription(),
                task.getTrainerId(),
                task.getStatus(),
                task.getDeadline(),
                task.getUploadFile()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        task.setId(id);
        return task;
    }

    @Override
    public Task findById(Long id) {
        List<Task> list = jdbcTemplate.query(
                "SELECT * FROM tasks WHERE id = ?",
                mapper,
                id
        );
        return list.isEmpty() ? null : list.get(0);
    }

    @Override
    public List<Task> findByUserId(Long userId) {
        return jdbcTemplate.query(
                "SELECT * FROM tasks WHERE user_id = ? ORDER BY created_at DESC",
                mapper,
                userId
        );
    }

    @Override
    public List<Task> findByTrainerId(Long trainerId) {
        return jdbcTemplate.query(
                "SELECT * FROM tasks WHERE trainer_id = ? ORDER BY created_at DESC",
                mapper,
                trainerId
        );
    }

    @Override
    public void update(Task task) {
        String sql = """
            UPDATE tasks SET description=?, status=?, deadline=?, upload_file=? WHERE id=?
        """;

        jdbcTemplate.update(sql,
                task.getDescription(),
                task.getStatus(),
                task.getDeadline(),
                task.getUploadFile(),
                task.getId()
        );
    }

    @Override
    public void delete(Long id) {
        jdbcTemplate.update("DELETE FROM tasks WHERE id = ?", id);
    }
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Trainer;
import java.util.List;

public interface TrainerDao {

    Trainer save(Trainer trainer);

    Trainer findByEmail(String email);

    Trainer findById(Long id);

    List<Trainer> findAll();

    void update(Trainer trainer);

    void deleteById(Long id);

    void deleteByEmail(String email);
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.Trainer;
import com.finalproject.internMgmtSystem.repository.TrainerDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public class TrainerDaoImpl implements TrainerDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    private RowMapper<Trainer> mapper = (rs, rowNum) -> {
        Trainer t = new Trainer();
        t.setTrainerId(rs.getLong("trainer_id"));
        t.setName(rs.getString("name"));
        t.setEmail(rs.getString("email"));
        t.setPassword(rs.getString("password"));
        t.setContact(rs.getString("contact"));
        t.setExperience(rs.getString("experience"));
        t.setSkills(rs.getString("skills"));
        t.setProfilePic(rs.getString("profile_pic"));
        t.setBio(rs.getString("bio"));
        t.setRole(rs.getString("role"));
        t.setCreatedAt(rs.getTimestamp("created_at"));
        return t;
    };

    @Override
    public Trainer save(Trainer trainer) {
        String sql = "INSERT INTO trainers (name, email, password, contact, experience, skills, profile_pic, bio, role) "
                   + "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";

        jdbcTemplate.update(sql,
                trainer.getName(),
                trainer.getEmail(),
                trainer.getPassword(),
                trainer.getContact(),
                trainer.getExperience(),
                trainer.getSkills(),
                trainer.getProfilePic(),
                trainer.getBio(),
                trainer.getRole()
        );

        Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
        trainer.setTrainerId(id);
        return trainer;
    }

    @Override
    public Trainer findByEmail(String email) {
        List<Trainer> list = jdbcTemplate.query(
                "SELECT * FROM trainers WHERE email = ?",
                mapper,
                email
        );
        return list.isEmpty() ? null : list.get(0);
    }

    @Override
    public Trainer findById(Long id) {
        List<Trainer> list = jdbcTemplate.query(
                "SELECT * FROM trainers WHERE trainer_id = ?",
                mapper,
                id
        );
        return list.isEmpty() ? null : list.get(0);
    }

    @Override
    public List<Trainer> findAll() {
        return jdbcTemplate.query(
                "SELECT * FROM trainers",
                mapper
        );
    }

    @Override
    public void update(Trainer trainer) {
        String sql = "UPDATE trainers SET name=?, contact=?, experience=?, skills=?, profile_pic=?, bio=? "
                   + "WHERE trainer_id=?";

        jdbcTemplate.update(sql,
                trainer.getName(),
                trainer.getContact(),
                trainer.getExperience(),
                trainer.getSkills(),
                trainer.getProfilePic(),
                trainer.getBio(),
                trainer.getTrainerId()
        );
    }

    @Override
    public void deleteById(Long id) {
        jdbcTemplate.update(
                "DELETE FROM trainers WHERE trainer_id = ?",
                id
        );
    }

    @Override
    public void deleteByEmail(String email) {
        jdbcTemplate.update("DELETE FROM trainers WHERE email = ?", email);
    }
}
package com.finalproject.internMgmtSystem.repository;

import java.util.List;
import com.finalproject.internMgmtSystem.dto.UserBatchDto;

public interface UserBatchDao {
    List<UserBatchDto> getUsersByTrainerId(int trainerId);
}
package com.finalproject.internMgmtSystem.repository;

import java.util.List;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;
import com.finalproject.internMgmtSystem.dto.UserBatchDto;

@Repository
public class UserBatchDaoImpl implements UserBatchDao {

    private final JdbcTemplate jdbcTemplate;

    public UserBatchDaoImpl(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    @Override
    public List<UserBatchDto> getUsersByTrainerId(int trainerId) {
        String sql = "SELECT u.user_id, u.user_name, u.email, u.contact_no, u.batch_code, " +
                     "b.batch_name, b.course_name, b.trainer_id " +
                     "FROM users u " +
                     "JOIN internship_batches b ON b.batch_code = u.batch_code " +
                     "WHERE b.trainer_id = ?";

        return jdbcTemplate.query(sql, (rs, rowNum) -> {
            UserBatchDto dto = new UserBatchDto();
            dto.setUserId(rs.getLong("user_id")); // <-- ADDED
            dto.setUserName(rs.getString("user_name"));
            dto.setEmail(rs.getString("email"));
            dto.setContactNo(rs.getString("contact_no"));
            dto.setBatchCode(rs.getString("batch_code"));
            dto.setBatchName(rs.getString("batch_name"));
            dto.setCourseName(rs.getString("course_name"));
            dto.setTrainerId(rs.getInt("trainer_id"));
            return dto;
        }, trainerId);
    }

}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.User;
import java.util.List;

public interface UserDao {

    User save(User user);

    User findByEmail(String email);

    User findById(Long id);

    List<User> findAll();

    void update(User user);

    void deleteById(Long id);
}
package com.finalproject.internMgmtSystem.repository;

import com.finalproject.internMgmtSystem.model.User;
import com.finalproject.internMgmtSystem.repository.UserDao;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;

import java.sql.Types;
import java.util.List;

@Repository
public class UserDaoImpl implements UserDao {

	@Autowired
	private JdbcTemplate jdbcTemplate;

	private RowMapper<User> mapper = (rs, rowNum) -> {
		User u = new User();
		u.setUserId(rs.getLong("user_id"));
		u.setUserName(rs.getString("user_name"));
		u.setEmail(rs.getString("email"));
		u.setPassword(rs.getString("password"));
		u.setDob(rs.getDate("dob"));
		u.setContactNo(rs.getString("contact_no"));
		u.setAddress(rs.getString("address"));
		u.setCollegeName(rs.getString("college_name"));
		u.setGrade(rs.getString("grade"));
		u.setMajor(rs.getString("major"));
		u.setTeam(rs.getString("team"));
		u.setBatchCode(rs.getLong("batch_code"));
		u.setStartDate(rs.getDate("start_date"));
		u.setEndDate(rs.getDate("end_date"));
		u.setGraduatingYear(rs.getInt("graduating_year"));
		u.setResume(rs.getString("resume"));
		u.setProfilePic(rs.getString("profile_pic"));
		u.setRole(rs.getString("role"));
		u.setCreatedAt(rs.getTimestamp("created_at"));
		return u;
	};

	@Override
	public User save(User user) {
		String sql = """
				INSERT INTO users
				(user_name, email, password, dob, contact_no, address, college_name, grade, major,
				team, batch_code, start_date, end_date, graduating_year, resume, profile_pic, role)
				VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
				""";

		jdbcTemplate.update(sql, user.getUserName(), user.getEmail(), user.getPassword(), user.getDob(),
				user.getContactNo(), user.getAddress(), user.getCollegeName(), user.getGrade(), user.getMajor(),
				user.getTeam(), user.getBatchCode(), user.getStartDate(), user.getEndDate(), user.getGraduatingYear(),
				user.getResume(), user.getProfilePic(), user.getRole());

		Long id = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
		user.setUserId(id);
		return user;
	}

	@Override
	public User findByEmail(String email) {
		List<User> list = jdbcTemplate.query("SELECT * FROM users WHERE email = ?", mapper, email);
		return list.isEmpty() ? null : list.get(0);
	}

	@Override
	public User findById(Long id) {
		List<User> list = jdbcTemplate.query("SELECT * FROM users WHERE user_id = ?", mapper, id);
		return list.isEmpty() ? null : list.get(0);
	}

	@Override
	public List<User> findAll() {
		return jdbcTemplate.query("SELECT * FROM users", mapper);
	}

	@Override
	public void update(User user) {
		String sql = """
				    UPDATE users SET user_name=?, contact_no=?, address=?, college_name=?, grade=?, major=?,
				    team=?, start_date=?, end_date=?, graduating_year=?, resume=?, profile_pic=? WHERE user_id=?
				""";

		jdbcTemplate.update(sql, user.getUserName(), user.getContactNo(), user.getAddress(), user.getCollegeName(),
				user.getGrade(), user.getMajor(), user.getTeam(), user.getBatchCode(), user.getStartDate(),
				user.getEndDate(), user.getGraduatingYear(), user.getResume(), user.getProfilePic(), user.getUserId());
	}

	@Override
	public void deleteById(Long id) {
		jdbcTemplate.update("DELETE FROM users WHERE user_id = ?", id);
	}
}

Sravya‚Ä¶ I found ALL your errors.
Your schema + data.sql is WRONG in three places.
That is why H2 fails.

I will fix everything clearly now.


---

‚úÖ ISSUE 1: Your schema.sql has a syntax error

This line is invalid in H2:

CONSTRAINT fk_bc FOREIGN KEY (batch_code)

But you wrote:

CONSTRAINT fk_bcFOREIGN KEY

There is NO SPACE between fk_bc and FOREIGN.
H2 throws:

expected FOREIGN

‚úî MUST be:

CONSTRAINT fk_bc FOREIGN KEY (batch_code)


---

‚úÖ ISSUE 2: Your data.sql inserts duplicate batch 1001

You inserted internship_batches TWO TIMES:

INSERT INTO internship_batches (...) VALUES (1001...)

Then again later:

INSERT INTO internship_batches (...) VALUES (1001...)

Second insert violates:

PRIMARY KEY batch_code already exists

Delete the duplicate.


---

‚úÖ ISSUE 3: You insert USERS before ADMIN

This line:

INSERT INTO users (user_id, user_name, email, password, role)
VALUES (99, 'Test Admin', 'existing@admin.com', '...', 'ADMIN');

Is fine.

But your FIRST USER insert uses:

batch_code = 1001

So internship_batches must always come before users.

You inserted correctly once, but later you inserted users two times.


---

‚≠ê I AM GIVING YOU THE CORRECT FINAL VERSIONS

Copy‚Äìpaste EXACTLY.


---

‚úÖ FINAL FIXED schema.sql

CREATE TABLE trainers (
    trainer_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    email VARCHAR(255),
    password VARCHAR(255),
    contact VARCHAR(50),
    experience VARCHAR(100),
    skills VARCHAR(255),
    profile_pic VARCHAR(500),
    bio VARCHAR(1000),
    role VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE internship_batches (
    batch_code BIGINT AUTO_INCREMENT PRIMARY KEY,
    batch_name VARCHAR(255),
    course_name VARCHAR(255),
    trainer_id BIGINT,
    start_date DATE,
    end_date DATE,
    total_seats INT,
    available_seats INT,
    CONSTRAINT fk_tid FOREIGN KEY (trainer_id)
        REFERENCES trainers(trainer_id)
);
    
CREATE TABLE users (
    user_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_name VARCHAR(255),
    email VARCHAR(255),
    password VARCHAR(255),
    dob DATE,
    contact_no VARCHAR(50),
    address VARCHAR(255),
    college_name VARCHAR(255),
    grade VARCHAR(50),
    major VARCHAR(100),
    team VARCHAR(100),
    batch_code BIGINT,
    start_date DATE,
    end_date DATE,
    graduating_year INT,
    resume VARCHAR(500),
    profile_pic VARCHAR(500),
    role VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_bc FOREIGN KEY (batch_code)
        REFERENCES internship_batches(batch_code)
);

CREATE TABLE stipend (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    user_name VARCHAR(255),
    payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    payment_mode VARCHAR(50),
    amount DOUBLE,
    CONSTRAINT fk_uid FOREIGN KEY (user_id)
        REFERENCES users(user_id)
);

CREATE TABLE tasks (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    description VARCHAR(1000),
    trainer_id BIGINT,
    status VARCHAR(50),
    deadline DATE,
    upload_file VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_tasks_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),
    CONSTRAINT fk_tasks_trainer FOREIGN KEY (trainer_id)
        REFERENCES trainers(trainer_id)
);

CREATE TABLE feedback (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    user_name VARCHAR(255),
    batch_code BIGINT,
    trainer_id BIGINT,
    trainer_name VARCHAR(255),
    date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    feedback VARCHAR(2000),
    rating INT,
    CONSTRAINT fk_f_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),
    CONSTRAINT fk_f_train FOREIGN KEY (trainer_id)
        REFERENCES trainers(trainer_id),
    CONSTRAINT fk_f_batch FOREIGN KEY (batch_code)
        REFERENCES internship_batches(batch_code)
);

CREATE TABLE performance (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    trainer_id BIGINT,
    batch_code BIGINT,
    trainer_name VARCHAR(255),
    remarks VARCHAR(2000),
    task_evaluation_score INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_p_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),
    CONSTRAINT fk_p_train FOREIGN KEY (trainer_id)
        REFERENCES trainers(trainer_id),
    CONSTRAINT fk_p_batch FOREIGN KEY (batch_code)
        REFERENCES internship_batches(batch_code)
);

CREATE TABLE attendance (
    attendance_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT,
    batch_code BIGINT,
    date DATE,
    present BOOLEAN,
    CONSTRAINT fk_a_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),
    CONSTRAINT fk_a_batch FOREIGN KEY (batch_code)
        REFERENCES internship_batches(batch_code)
);


---

‚úÖ FINAL FIXED data.sql

INSERT INTO trainers VALUES
(1, 'John Miller', 'john@trainer.com', 'pass123', '9876543210', '5 Years',
 'Java, Spring', NULL, 'Senior Trainer', 'TRAINER', CURRENT_TIMESTAMP);

INSERT INTO internship_batches VALUES
(1001, 'Java Full Stack', 'Java', 1, '2025-12-01', '2026-03-01', 30, 25);

INSERT INTO users VALUES
(1, 'Sravya', 'sravya@user.com', 'pass123', '2002-05-10', '9876543210',
 'Chennai', 'Vel Tech', 'A', 'CSE', 'Backend', 1001,
 '2025-01-01', '2025-03-01', 2025, 'resume.pdf', NULL, 'USER', CURRENT_TIMESTAMP);

INSERT INTO users (user_id, user_name, email, password, role)
VALUES (99, 'Test Admin', 'existing@admin.com', 'adminpass', 'ADMIN');

INSERT INTO tasks VALUES
(1, 1, 'Build REST API', 1, 'PENDING', '2025-12-04', 'file.pdf', CURRENT_TIMESTAMP);

INSERT INTO attendance VALUES
(1, 1, 1001, '2025-12-03', TRUE);

INSERT INTO performance VALUES
(1, 1, 1, 1001, 'John Miller', 'Good progress', 90, CURRENT_TIMESTAMP);

INSERT INTO feedback VALUES
(1, 1, 'Sravya', 1001, 1, 'John Miller', CURRENT_TIMESTAMP, 'Very helpful trainer', 5);

INSERT INTO stipend VALUES
(1, 1, 'Sravya', CURRENT_TIMESTAMP, 'Cash', 3000.00);


---

üöÄ NOW DO THIS (IMPORTANT)

1Ô∏è‚É£ Delete:

target/

2Ô∏è‚É£ Clean Maven:

Eclipse ‚Üí Project ‚Üí Clean ‚Üí Clean All

3Ô∏è‚É£ Run tests again


---

üí¨ If you want, send me your actual current data.sql + schema.sql files

I will fix line-by-line.
